/*! metaphorgy-client - v0.0.1 - 2013-11-20 */!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(){$(function(){var a=$("#metaform"),b=$("#word-entry"),c=$(".btn-entry"),d=$("#question"),e=$("#answer"),f=$("#word"),g=$("#metaphor"),h=$("#article"),i=$("#twitter-share"),j=$("title"),k=/metaphor\/(.+)\/(.+)/,l=function(a,b){var k=b.replace(/\s/,"-"),l=a.replace(/\s/,"-"),m="a";b[0].match(/[aeiou]/)&&(m="an"),f.text(a),g.text(b),h.text(m),j.text("Metaphorgy: My "+a+" is "+m+" "+b),i.attr("href","http://twitter.com/intent/tweet?url=http://www.metaphor.gy/metaphor/"+l+"/"+k+"&text=My "+a+" is "+b+".&hashtags=metaphorgy"),c.addClass("btn-success3d").removeAttr("disabled"),d.addClass("hidden"),e.removeClass("hidden")},m=function(){b.val(""),c.removeClass("btn-success3d"),d.removeClass("hidden"),e.addClass("hidden"),j.text("Metaphorgy: Metaphor Generator")};c.on("click",function(b){b.preventDefault(),c.attr("disabled")||(c.hasClass("btn-success3d")?(history&&history.pushState&&history.pushState(null,null,"/"),m()):a.submit())}),a.on("submit",function(a){a.preventDefault();var d=b.val();""!=d&&(c.removeClass("btn-error3d"),c.attr("disabled")||(c.attr("disabled","disabled"),$.getJSON("/metaphor/"+d,function(a){if(a.metaphor){var b=a.metaphor.replace(/\s/,"-"),e=d.replace(/\s/,"-");history&&history.pushState&&history.pushState(null,null,"/metaphor/"+e+"/"+b),l(a.word,a.metaphor)}else c.addClass("btn-error3d").removeAttr("disabled")})))});var n=function(){var a=k.exec(location.pathname);if(a&&3==a.length){var b=decodeURI(a[1]).replace(/-/," "),c=decodeURI(a[2]).replace(/-/," ");l(b,c)}else m()};window.addEventListener("popstate",n)})},{}]},{},[1]);